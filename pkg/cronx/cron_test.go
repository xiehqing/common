package cron

import (
	"testing"
)

func TestCron(t *testing.T) {
	//c := cron.New(cron.WithSeconds())
	expression := DefaultCronParser.AnalyzeCronExpression("? ? ? ? * ? ?")
	t.Logf("%v", expression)
	//t.Logf("%v", IsCronExpression("* * * * * ? *"))
	// 测试用例
	testCases := []string{
		"*/10 * * * * * 2025",        // 每10秒执行一次，仅2025年
		"*/10 * * * * *",             // 每10秒执行一次，仅2025年
		"* * * * *",                  // 每10秒执行一次，仅2025年
		"0 0 9 * * * 2024-2026",      // 每天早上9点执行，2024-2026年期间
		"0 * * * * * 2025,2027,2029", // 每分钟执行，在2025,2027,2029年
		"0 0 * * * * *",              // 每小时执行，所有年份
		"0 0 0 1 1 * 2024/2",         // 每两年的1月1日执行
		"0 */5 * * * * 2025",         // 每5分钟检查，仅2025年
		"0 30 10 * * 1-5 *",          // 工作日上午10:30执行
		"0 0 9,12,18 * * * *",        // 每天9点、12点、18点执行
		"0 0 0 1 * * *",              // 每月1号凌晨0点执行
		"0 0 0 * * 1 *",              // 每周一凌晨0点执行
		"0 0 0 1 1,6,12 * *",         // 每年1月、6月、12月的1号执行
		"0 15,45 * * * * *",          // 每小时的15分和45分执行
		"*/30 * * * * * *",           // 每30秒执行一次
		"0 0 */4 * * * *",            // 每4小时执行一次
		"0 0 0 */7 * * *",            // 每7天执行一次
		"0 0 8-18 * * 1-5 *",         // 工作日8点到18点每小时执行
		"0 0 0 1-7 * * *",            // 每月1号到7号凌晨执行
		"0 0 12 * * * 2025",          // 2025年每天中午12点执行
		"0 0 0 * */2 * *",            // 每2个月执行一次
		"30 30 10 15 * * *",          // 每月15号上午10点30分30秒执行
	}

	t.Logf("========== 7位Cron表达式转中文描述 ==========\n")
	for i, cronExpr := range testCases {
		desc, err := CronToDescription(cronExpr)
		if err != nil {
			t.Logf("%d. [错误] %s\n   错误信息: %v\n\n", i+1, cronExpr, err)
		} else {
			t.Logf("%d. Cron表达式: %s\n   中文描述: %s\n\n", i+1, cronExpr, desc)
		}
	}
}
